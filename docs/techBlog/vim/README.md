## vi/vim 终端中的编辑器

1. ```
   在终端中输入 vi 在后面跟上文件名 即可
   $ vi 文件名 +行数
   ```

   >提示：如果只带上 + 而不指定行号，会直接定位到文件末尾
   > 提示： 在Touch Bar  的mac电脑上，按 ESC不方便。可以使用 CTRL+【 替换

4. ### **末行模式的命令**

   * | 命令 | 英文         | 功能                           |
     | ---- | ------------ | ------------------------------ |
     | w    | write        | 保存                           |
     | q    | quit         | 退出，如果没有保存，不允许退出 |
     | q!   | quit         | 强行退出，不保存退出           |
     | wq   | write & quit | 保存并退出                     |
     | x    |              | 保存并退出                     |

5. ### **命令线路图**

   1. 重复次数
      * 在命令模式下，**先输一个数字，在跟上一个命令，** 可以让盖命令 **重复执行指定次数**
   2. 移动和选择（多练）
      * vi 之所以快，关键在于 **能够快速定位到要编辑的代码行**
      * **移动命令**  能够 和 **编辑操作**  命令  **组合使用**
   3. 编辑操作
      * **删除 ， 复制 ， 黏贴， 替换，缩排**
   4. 撤销和重复
   5. 查找和替换
   6. 编辑

6. ### **行数移动**

   * | 命令   | 英文 | 功能                           |
     | ------ | ---- | ------------------------------ |
     | gg     | go   | 文件头部                       |
     | G      | go   | 文件尾部                       |
     | 数字gg | go   | 移动到  数字 对应行数          |
     | 数字G  | go   | 移动到 数字 对应的行数         |
     | ：数字 |      | 移动到数字对应听的行数         |
     | w      | word | 向后移动一个单词               |
     | b      | back | 向前移动一个单词               |
     | 0      |      | 首行                           |
     | ^      |      | 行首，第一个不是空白字符的位置 |
     | $      |      | 行尾                           |

7. ### **屏幕移动**

   * | 命令   | 英文    | 功能     |
     | ------ | ------- | -------- |
     | CTRL+b | back    | 向上翻页 |
     | CTRL+f | forward | 向下翻页 |
     | H      | head    | 屏幕顶部 |
     | M      | Middle  | 屏幕中间 |
     | L      | Low     | 屏幕底部 |

8. ### 移动

   * | 命令 | 功能   |
     | ---- | ------ |
     | {    | 上一段 |
     | }    | 下一段 |

   * **括号切换**

     * 在程序世界中，（），【】，{} 使用频率很高，而且   **都是成对出现**

      | 命令 | 功能           |
      | ---- | -------------- |
      | %    | 括号匹配及切换 |

9. ### **标记**

   * | 命令 | 英文 | 功能                                         |
     | ---- | ---- | -------------------------------------------- |
     | mx   | mark | 添加标记 x，x是 a-z或者A-Z之间的任意一个字母 |
     | ‘ x  |      | 直接定位到标记x所在位置                      |

10. ### **选中文本（可视模式）**

    * | 命令   | 模式       | 功能                               |
      | ------ | ---------- | ---------------------------------- |
      | v      | 可视模式   | 从光标位置开始按照正常模式选择文本 |
      | V      | 可视行模式 | 选中光标经过的完整行               |
      | CTRL+v | 可视块模式 | 垂直方向选中文本                   |

    * **可视模式**下，可以和 **移动命令** 连用，例如： ggVG 能够选中所有内容

11. ### **撤销和回复撤销**

    * | 命令   | 英文 | 功能           |
      | ------ | ---- | -------------- |
      | u      | undo | 撤销上次命令   |
      | CTRL+r | redo | 恢复撤销的命令 |

    * 删除文本

    * | 命令          | 英文   | 功能                             |
       | ------------- | ------ | -------------------------------- |
       | x             | cut    | 删除光标所在的字符，或者选中文字 |
       | d（移动命令） | delete | 删除移动命令对应的内容           |
       | dd            | delete | 删除光标所在行，可以ndd 复制多行 |
       | D             | delete | 删除至行尾                       |

        > 提示：如果使用 **可视模式** 已经选中了一段文本，那么无论使用  d 还是 x  ，都可以删除选中文本

      * 删除命令可以和 **移动命令** 连用，一下是常见的组合命令：

      * ```
        dw		从光标位置删除到单词末尾
        d0		从光标位置删除到一行的其实位置
        d}		从光标位置删除到段落结尾
        ndd		从光标位置向下连续删除 n 行
        d代码行G 从光标所在行 删除到 指定代码行之间的所有代码
        d'a		从光标所在行 删除到 标记a 之间的所有代码
        ```

12. ### **复制，粘贴**

    * | 命令          | 英文  | 功能                         |
      | ------------- | ----- | ---------------------------- |
      | y（移动命令） | copy  | 复制                         |
      | yy            | copy  | 复制一行，也可以nyy 复制多行 |
      | p             | paste | 黏贴                         |

13. ### **替换**

    * | 命令 | 英文    | 功能                   | 工作模式 |
      | ---- | ------- | ---------------------- | -------- |
      | r    | replace | 替换当前字符           | 命令模式 |
      | R    | replace | 替换当前行光标后的字符 | 替换模式 |

    * R 命令可以进入 **替换模式**，替换完成后，按下 ESC 可以回到 **命令模式**

    * **替换模式**  的作用就是不用进入 **编辑模式**， 对文件进行 **轻量级的修改**

14. ### **缩排和重复执行**

    * | 命令 | 功能         |
      | ---- | ------------ |
      | >>   | 向右增加缩进 |
      | <<   | 向左减缩进   |
      | .    | 重复上次命令 |

    * **缩排命令**在开发程序时，**统一增加代码的缩进** 比较有用

      * 一次性 **在选中代码前增加 4 个空格**，就叫做 **增加缩进**
      * 一次性 **在选中代码前删除4个空格**，就叫做 **减少缩进**

    * 在 **可视模式下，** 缩排命令只需要使用一个 >  或者  <

      >在程序中， **缩进** 通常用来代表代码的归属关系
      >
      >* 前面空格越少，代码的级别就越高
      >* 前面的空格越多，代码的级别就越低

15. ### 查找

    * | 命令 | 功能    |
      | ---- | ------- |
      | /str | 查找str |

    * 查找到指定内容之后，使用 **Next** 查找下一个出现的位置：

      * n ： 查找下一个
      * N： 查找上一个

    * 如果不想看到高亮显示，可以随便查找一个文件中不存在的内容即可

    * **单词快速匹配**

      * | 命令  | 功能                     |
        | ----- | ------------------------ |
        | ***** | 向后查找当前光标所在单词 |
        | #     | 向前查找当前光标所在单词 |

      * 在开发中，通过单词快速匹配，可以快速看到这个单词在其他什么位置使用过

16. ### **查找并替换**

    * 在 **vi** 中查找和替换命令需要在 **末行模式** 下执行

    * 记忆命令格式：

    * ```shell
      :%s///g
      ```

    * **全局替换**

      * **一次性** 替换文件中 **所有出现的旧文本**

      * 命令格式：

      * ```shell
        :%s/旧文本/新文本/g
        ```

    * **可视区域替换**

      * **未选中** 要替换文字的 **范围**

      * 命令格式如下：

      * ```visual basic
        :s/旧文本/新文本/g
        ```

    * **确认替换**

      * 如果把未尾的 **g** 改写成 **gc** 在替换的时候，会有提示！ **推荐使用**

      * ```visual basic
        ：%s/旧文本/新文本/gc
        ```

        * y - yes	替换
        * n - no     不替换
        * a - all       替换所有
        * q - quit    退出替换
        * l - last       最后一个，并把光标移动到首行
        * ^E             向下滚屏
        * ^Y             向上滚屏

17. ### **插入命令**

    * | 命令 | 英文   | 功能                   | 常用   |
      | ---- | ------ | ---------------------- | ------ |
      | i    | insert | 在当前字符前插入文本   | 常用   |
      | I    | insert | 在首行插入文本         | 较常用 |
      | a    | append | 在当前字符后添加文本   |        |
      | A    | append | 在行末添加文本         | 较常用 |
      | o    |        | 在当前行后面插入一空行 | 常用   |
      | O    |        | 在当前行前面插入一空行 | 常用   |

18. ### **分屏命令**

    * | 命令      | 英文  | 功能                                           |
      | --------- | ----- | ---------------------------------------------- |
      | ：e.      | edit  | 会打开内置的文件浏览器，浏览要当前目录下的文件 |
      | ：n文件名 | new   | 新建文件                                       |
      | ：w文件名 | write | 另存为，但是仍然编辑当前文件，并不会切换文件   |

      >提示：切换文件之前，必须保证当前这个文件已经被保存

     * | 命令      | 英文         | 功能                           |
       | --------- | ------------ | ------------------------------ |
       | ：w       | write        | 保存                           |
       | ：q       | quit         | 退出，如果没有保存，不允许退出 |
       | ：q！     | quit         | 强行退出，不保存退出           |
       | ：wq      | write & quit | 保存并退出                     |
       | ：x       |              | 保存并退出                     |
       | ：%s///gc |              | 确认 搜索并替换                |

    * | 命令            | 英文          | 功能         |
      | --------------- | ------------- | ------------ |
      | ：sp【文件名】  | split         | 横向增加分屏 |
      | ：vsp【文件名】 | verical split | 纵向增加分屏 |

    * **切换分屏窗口**

      >分屏窗口都是基于 <kbd>CTRL + W</kbd> 这个快捷键的，  **w** 对应的英文单词时 window

    * | 命令 | 英文    | 功能                                       |
      | ---- | ------- | ------------------------------------------ |
      | w    | window  | 切换下一个窗口                             |
      | r    | reverse | 互换窗口                                   |
      | c    | close   | 关闭当前窗口，但是不能关闭最后一个窗口     |
      | q    | quit    | 退出当前窗口，如果是最后一个窗口，则关闭vi |
      | o    | other   | 关闭其他窗口                               |
